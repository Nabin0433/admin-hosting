{"version":3,"sources":["views/categories/ListCategories.js"],"names":["server","process","ListCategories","token","useSelector","selectUser","history","useHistory","useState","loading","setLoading","deleteModal","setDeleteModal","newCategoryModal","setNewCategoryModal","reload","setReload","newCategoriesName","setNewCategoriesName","newCategoriesIcon","setNewCategoriesIcon","newCategoriesIndex","setNewCategoriesIndex","newCategoriesImg","setNewCategoriesImg","newCategoryBanner","setNewCategoryBanner","newCategoriesType","setNewCategoriesType","seoTitle","setSeoTitle","seoDescription","setSeoDescription","seoAlt","setSeoAlt","event","setEvent","clearEvent","ms","setTimeout","data","setData","NewCategoryModalToggle","useEffect","axios","get","headers","Authorization","then","categories","catch","err","type","massage","response","message","className","onClick","style","float","color","variant","show","onClose","closeButton","onChange","e","target","value","name","placeholder","files","fileName","formData","FormData","append","post","res","tableFilter","items","fields","key","_classes","label","hover","striped","itemsPerPage","scopedSlots","SN","_","index","icon","item","width","src","categoryIcon","img","alt","Action","push","_id","delete"],"mappings":"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","file":"static/js/15.59c5a188.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./Categories.css\";\r\nimport {\r\n  CButton,\r\n  CModal,\r\n  CModalHeader,\r\n  CModalFooter,\r\n  CModalBody,\r\n  CCardTitle,\r\n  CCardBody,\r\n  CDataTable,\r\n  CInput,\r\n  CAlert,\r\n} from \"@coreui/react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"../../localyStore\";\r\nimport axios from \"axios\";\r\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\r\nimport CreateIcon from \"@material-ui/icons/Create\";\r\nimport AddCategoryModal from \"./AddCategoryModal\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst server = process.env.REACT_APP_SERVER;\r\n\r\nconst ListCategories = () => {\r\n  // Admin token\r\n  const { token } = useSelector(selectUser);\r\n  const history = useHistory();\r\n  const [loading, setLoading] = useState(true);\r\n  const [deleteModal, setDeleteModal] = useState(false);\r\n  const [newCategoryModal, setNewCategoryModal] = useState(false);\r\n  const [reload, setReload] = useState(false);\r\n  // new\r\n  const [newCategoriesName, setNewCategoriesName] = useState(\"\");\r\n  const [newCategoriesIcon, setNewCategoriesIcon] = useState(\"\");\r\n  const [newCategoriesIndex, setNewCategoriesIndex] = useState(\"\");\r\n  const [newCategoriesImg, setNewCategoriesImg] = useState(\"\");\r\n  const [newCategoryBanner, setNewCategoryBanner] = useState(\"\");\r\n  const [newCategoriesType, setNewCategoriesType] = useState(\"\");\r\n  const [seoTitle, setSeoTitle] = useState(\"\");\r\n  const [seoDescription, setSeoDescription] = useState(\"\");\r\n  const [seoAlt, setSeoAlt] = useState(\"\");\r\n\r\n  // alert\r\n  const [event, setEvent] = useState(null);\r\n\r\n  const clearEvent = (ms) => {\r\n    setTimeout(() => {\r\n      setEvent(null);\r\n    }, ms);\r\n  };\r\n  // set Tables\r\n  const [data, setData] = useState(null);\r\n  // toogke for new category\r\n  const NewCategoryModalToggle = () => {\r\n    setNewCategoryModal(!newCategoryModal);\r\n  };\r\n  useEffect(() => {\r\n    axios\r\n      .get(server + process.env.REACT_APP_ADMIN_All_CATEGORY_GET, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((data) => {\r\n        setData(data.data.categories);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        setEvent({\r\n          type: \"error\",\r\n          massage:\r\n            err?.response?.data.message ?? \"error on server back-end server\",\r\n        });\r\n        clearEvent(5000);\r\n      });\r\n  }, [reload, token]);\r\n\r\n  // submit new categories\r\n  const confirmDeleteCategories = () => {\r\n    axios\r\n      .delete(server + \"/api/categorys/delete/\" + deleteModal, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        setDeleteModal(false);\r\n        setReload(!reload);\r\n        setEvent({\r\n          type: \"success\",\r\n          massage: res.data.message,\r\n        });\r\n        clearEvent(5000);\r\n      })\r\n      .catch((err) => {\r\n        setDeleteModal(false);\r\n        setEvent({\r\n          type: \"error\",\r\n          massage: err.response.data.message,\r\n        });\r\n        clearEvent(5000);\r\n      });\r\n  };\r\n\r\n  // new // addnew category\r\n  const addNewCategories = () => {\r\n    if (\r\n      !newCategoriesName ||\r\n      !newCategoriesIcon ||\r\n      !newCategoriesIndex ||\r\n      !newCategoriesImg ||\r\n      !seoTitle ||\r\n      !seoDescription ||\r\n      !seoAlt\r\n    ) {\r\n      setEvent({\r\n        type: \"warn\",\r\n        massage: \"require all feilds\",\r\n      });\r\n      clearEvent(5000);\r\n      return;\r\n    }\r\n    const formData = new FormData();\r\n    formData.append(\"name\", newCategoriesName);\r\n    formData.append(\"parentId\", \"\");\r\n    formData.append(\"identity\", \"\");\r\n    formData.append(\"index\", newCategoriesIndex ?? 0);\r\n    formData.append(\"categoryIcon\", newCategoriesIcon);\r\n    formData.append(\"categoryImage\", newCategoriesImg);\r\n    formData.append(\"categoryBanner\", newCategoryBanner);\r\n    formData.append(\"type\", newCategoriesType ? newCategoriesType : \"list\");\r\n    formData.append(\"seoTitle\", seoTitle);\r\n    formData.append(\"seoDescription\", seoDescription);\r\n    formData.append(\"seoAlt\", seoAlt);\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_SERVER +\r\n          process.env.REACT_APP_ADMIN_CATEGORY_POST,\r\n        formData,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        setNewCategoriesName(\"\");\r\n        setNewCategoriesIndex(\"\");\r\n        setSeoDescription(\"\");\r\n        setNewCategoriesType(\"\");\r\n        setSeoTitle(\"\");\r\n        setSeoAlt(\"\");\r\n        setReload(!reload);\r\n        setNewCategoryModal(false);\r\n        setEvent({\r\n          type: \"success\",\r\n          massage: res.data.message,\r\n        });\r\n        clearEvent(5000);\r\n      })\r\n      .catch((err) => {\r\n        setEvent({\r\n          type: \"error\",\r\n          massage: err.response.data.message,\r\n        });\r\n        clearEvent(5000);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <CCardTitle className=\"p-1\">\r\n      <p>Manage Category</p>\r\n      <CButton\r\n        onClick={NewCategoryModalToggle}\r\n        style={{ float: \"right\" }}\r\n        color=\"success\"\r\n        variant=\"outline\"\r\n      >\r\n        New Category\r\n      </CButton>\r\n      <CModal show={newCategoryModal} onClose={NewCategoryModalToggle}>\r\n        <CModalHeader closeButton>New Category</CModalHeader>\r\n        <CModalBody>\r\n          <CInput\r\n            onChange={(e) => setNewCategoriesName(e.target.value)}\r\n            value={newCategoriesName}\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Enter New Categories\"\r\n          />\r\n          <CInput\r\n            onChange={(e) => setNewCategoriesIndex(e.target.value)}\r\n            value={newCategoriesIndex}\r\n            type=\"number\"\r\n            name=\"index\"\r\n            placeholder=\"index\"\r\n          />\r\n          <CInput\r\n            onChange={(e) => setSeoTitle(e.target.value)}\r\n            value={seoTitle}\r\n            type=\"text\"\r\n            name=\"seoDescription\"\r\n            placeholder=\"seoTitle\"\r\n          />\r\n          <CInput\r\n            onChange={(e) => setSeoDescription(e.target.value)}\r\n            value={seoDescription}\r\n            type=\"text\"\r\n            name=\"seoDescription\"\r\n            placeholder=\"seoDescription\"\r\n          />\r\n          <CInput\r\n            onChange={(e) => setSeoAlt(e.target.value)}\r\n            value={seoAlt}\r\n            type=\"text\"\r\n            name=\"seoAlt\"\r\n            placeholder=\"seoAlt\"\r\n          />\r\n          <br />\r\n          Image :\r\n          <CInput\r\n            onChange={(e) => setNewCategoriesImg(e.target.files[0])}\r\n            type=\"file\"\r\n            name=\"categoryImage\"\r\n            value={newCategoriesImg?.fileName}\r\n          />\r\n          <br />\r\n          Icon :\r\n          <CInput\r\n            onChange={(e) => setNewCategoriesIcon(e.target.files[0])}\r\n            type=\"file\"\r\n            name=\"Icon\"\r\n            value={newCategoriesIcon?.fileName}\r\n          />\r\n          <br />\r\n          Banner :\r\n          <CInput\r\n            onChange={(e) => setNewCategoryBanner(e.target.files[0])}\r\n            type=\"file\"\r\n            name=\"categoryBanner\"\r\n            value={newCategoryBanner?.fileName}\r\n          />\r\n          <br />\r\n          {event?.type === \"warn\" && (\r\n            <div className=\"position-fixed fixed-top d-flex justify-content-center\">\r\n              <CAlert color=\"danger\">{event.massage}</CAlert>\r\n            </div>\r\n          )}\r\n        </CModalBody>\r\n        <CModalFooter>\r\n          <CButton onClick={addNewCategories} color=\"primary\">\r\n            Add\r\n          </CButton>\r\n        </CModalFooter>\r\n      </CModal>\r\n      {/* end new */}\r\n      <CCardBody>\r\n        <CDataTable\r\n          tableFilter\r\n          items={data}\r\n          fields={[\r\n            \"SN\",\r\n            \"icon\",\r\n            { key: \"name\", _classes: \"\" },\r\n            { key: \"Action\", label: \"\" },\r\n          ]}\r\n          hover\r\n          striped\r\n          loading={loading}\r\n          itemsPerPage={20}\r\n          scopedSlots={{\r\n            SN: (_, index) => <td>{index + 1}</td>,\r\n            icon: (item, index) => (\r\n              <td>\r\n                <img\r\n                  key={index}\r\n                  width=\"40\"\r\n                  src={item.categoryIcon[0]?.img}\r\n                  alt=\"icon\"\r\n                />\r\n              </td>\r\n            ),\r\n            Action: (item) => (\r\n              <>\r\n                <td\r\n                  className=\"delete_color text-center\"\r\n                  onClick={() => {\r\n                    history.push(\"/categoriesList/\" + item._id);\r\n                  }}\r\n                >\r\n                  <CreateIcon />\r\n                </td>\r\n                <td\r\n                  className=\"delete_red_color\"\r\n                  onClick={() => setDeleteModal(item._id)}\r\n                >\r\n                  <DeleteForeverIcon />\r\n                </td>\r\n              </>\r\n            ),\r\n          }}\r\n        />\r\n      </CCardBody>\r\n      <CModal\r\n        className=\"sm-30\"\r\n        show={deleteModal}\r\n        onClose={() => setDeleteModal(false)}\r\n      >\r\n        <CModalHeader closeButton>COMFIRM</CModalHeader>\r\n        <CModalBody>delete</CModalBody>\r\n        <CModalFooter>\r\n          <CButton onClick={() => setDeleteModal(false)} color=\"primary\">\r\n            Cancel\r\n          </CButton>\r\n          <CButton onClick={confirmDeleteCategories} color=\"primary\">\r\n            Confirm\r\n          </CButton>\r\n        </CModalFooter>\r\n      </CModal>\r\n      {event?.type === \"error\" && (\r\n        <div className=\"position-fixed fixed-top d-flex justify-content-center\">\r\n          <CAlert color=\"danger\">{event.massage}</CAlert>\r\n        </div>\r\n      )}\r\n      {event?.type === \"success\" && (\r\n        <div className=\"position-fixed fixed-top d-flex justify-content-center\">\r\n          <CAlert color=\"success\">{event.massage}</CAlert>\r\n        </div>\r\n      )}\r\n    </CCardTitle>\r\n  );\r\n};\r\n\r\nexport default ListCategories;\r\n"],"sourceRoot":""}