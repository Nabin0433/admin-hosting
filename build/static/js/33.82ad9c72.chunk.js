(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[33],{1117:function(e,t,r){"use strict";r.r(t);var i=r(79),n=r(181),c=r(669),l=r(1118),a=r(660),o=r(686),s=r.n(o),d=r(723),u=r.n(d),j=r(663),b=r.n(j),f=r(1),m=r(78),v=r(77),h=r(23),p=(r(722),r(24));t.default=function(){var e,t=Object(h.f)(),r=Object(m.c)((function(e){return e.user._id})),o=Object(m.c)(v.e),d=o.role,j=o.token,O=Object(f.useState)(!0),g=Object(n.a)(O,2),x=g[0],y=g[1],P=Object(f.useState)(!1),k=Object(n.a)(P,2),S=k[0],C=k[1],_=Object(f.useState)([]),N=Object(n.a)(_,2),A=N[0],F=N[1],T=Object(f.useState)([]),w=Object(n.a)(T,2),I=w[0],z=w[1],B=Object(f.useState)(null),q=Object(n.a)(B,2),M=q[0],U=q[1],K=Object(f.useState)(1),V=Object(n.a)(K,2),D=V[0],E=V[1],J=Object(f.useState)(),L=Object(n.a)(J,2),G=L[0],H=L[1],Q=Object(f.useState)(),R=Object(n.a)(Q,2),W=R[0],X=R[1],Y=Object(f.useState)("pending"),Z=Object(n.a)(Y,2),$=Z[0],ee=Z[1],te="http://3.110.91.117",re=Object(f.useState)(null),ie=Object(n.a)(re,2),ne=ie[0],ce=ie[1],le=Object(f.useState)(null),ae=Object(n.a)(le,2),oe=ae[0],se=ae[1],de=function(e){setTimeout((function(){se(null)}),e)};Object(f.useEffect)((function(){var e;"admin"===d&&(e="/api/allproduct/list",b.a.get(te+"/api/admin/alloffers",{headers:{Authorization:"Bearer ".concat(j)}}).then((function(e){F(e.data.offers),y(!1)})).catch((function(e){var t,r;y(!1),se({type:"error",massage:null!==(t=null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data.message)&&void 0!==t?t:"server-error"}),de(5e3)})),b.a.get(te+"/api/admin/flashsale",{headers:{Authorization:"Bearer ".concat(j)}}).then((function(e){z(e.data.flashSales[0])})).catch((function(e){var t,r;se({type:"error",massage:null!==(t=null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data.message)&&void 0!==t?t:"server-error"}),de(5e3)}))),"vendor"===d&&(e="/api/vendor/listing-all-products"),b.a.get(te+e,{headers:{Authorization:"Bearer ".concat(j)}}).then((function(e){"admin"===d&&je(null===e||void 0===e?void 0:e.data.products),"vendor"===d&&(je(null===e||void 0===e?void 0:e.data.vendorProductPending),X(e.data)),y(!1)})).catch((function(e){var t,r;se({type:"error",massage:null!==(t=null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data.message)&&void 0!==t?t:"server-error"}),de(5e3)}))}),[j,d,r,ne]);var ue,je=function(e){var t=e.map((function(e){var t,r,i,n,c,l,a,o;return{_id:e._id,ProductImg:null===(t=e.productPictures)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.img,name:e.name,price:Math.round(e.price),quantity:Math.round(e.quantity),discountPrice:Math.round(e.discountPrice),finalPrice:Math.round(e.finalPrice),slug:e.slug,sku:e.sku_number,category:(null===(i=e.sub2Category)||void 0===i?void 0:i.name)||(null===(n=e.sub1Category)||void 0===n?void 0:n.name)||(null===(c=e.mainCategory)||void 0===c?void 0:c.name),verifiedVendors:null!==(l=null===e||void 0===e||null===(a=e.verifiedVendors)||void 0===a?void 0:a.name)&&void 0!==l?l:null===(o=e.createdBy)||void 0===o?void 0:o.name}}));H(t)},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;C(!S),U(Object(i.a)(Object(i.a)({},e),{},{product:t}))};"admin"===d&&(ue=[{key:"sku",label:"SKU",_style:{width:"9%"},sorter:!1,filter:!0},{key:"ProductImg",label:"Image",sorter:!1,filter:!1},{key:"slug",label:"Name",sorter:!0,filter:!0},"price","discountPrice","finalPrice","category","quantity",{key:"verifiedVendors",label:"CreatedBy",_style:{width:"6%"},sorter:!0,filter:!0},{key:"offers",label:"Offer",_style:{width:"6%"},sorter:!1,filter:!1},{key:"Action",label:"",_style:{width:"6%"},sorter:!1,filter:!1}]),"vendor"===d&&(ue="pending"===$?[{key:"sku",label:"SKU",_style:{width:"9%"},sorter:!1,filter:!0},{key:"ProductImg",label:"Image",sorter:!1,filter:!1},{key:"slug",label:"Name",sorter:!0,filter:!0},"price","category","quantity",{key:"Action",label:"",_style:{width:"6%"},sorter:!1,filter:!1}]:[{key:"sku",label:"SKU",_style:{width:"9%"},sorter:!1,filter:!0},{key:"ProductImg",label:"Image",sorter:!1,filter:!1},{key:"slug",label:"Name",sorter:!0,filter:!0},"price","category","quantity"]);return Object(p.jsxs)("div",{className:"productlist",children:[Object(p.jsx)(a.U,{children:Object(p.jsx)(a.o,{xl:12,children:Object(p.jsxs)(a.i,{children:["vendor"===d&&Object(p.jsx)(a.m,{children:Object(p.jsxs)("select",{onChange:function(e){ee(e.target.value),"pending"===e.target.value?je(W.vendorProductPending):je(W.vendorProductApproved)},children:[Object(p.jsx)("option",{value:"pending",children:"Pending"}),Object(p.jsx)("option",{value:"approved",children:"Approved"})]})}),Object(p.jsx)(a.n,{className:"text-center mt-4",children:"admin"===d?"Product Lists":"pending"===$?"Pending Products":"Approved Products"}),Object(p.jsx)(a.j,{children:Object(p.jsx)(a.r,{tableFilter:!0,columnFilter:!0,sorter:!0,pagination:!0,itemsPerPageSelect:!0,loading:x,items:G,fields:ue,hover:!0,striped:!0,itemsPerPage:10,scopedSlots:{"SiNo.":function(e,t){return Object(p.jsx)("td",{children:t+1},t)},ProductImg:function(e){return Object(p.jsx)("td",{children:Object(p.jsx)("img",{className:"productlist_img",loading:"lazy",src:e.ProductImg,alt:e.name})})},offers:function(e){return Object(p.jsx)("td",{children:Object(p.jsxs)(a.s,{children:[Object(p.jsx)(a.v,{children:Object(p.jsx)(c.a,{content:l.a.cilGift,size:"2xl"})}),Object(p.jsxs)(a.u,{children:[Object(p.jsx)("h5",{className:"center my-2",children:"Add Offres"}),null===A||void 0===A?void 0:A.map((function(t){return Object(p.jsx)(a.t,{onClick:function(){return be(t,e)},children:t.offerTitle},t._id)})),Object(p.jsx)("h5",{className:"center my-2",children:"Add FlashSale"}),I&&Object(p.jsx)(a.t,{onClick:function(){return be(Object(i.a)(Object(i.a)({},I),{},{offerTitle:null===I||void 0===I?void 0:I.flashSalesTitle}),e)},children:I.flashSalesTitle},null===I||void 0===I?void 0:I._id)]})]})})},Action:function(e){return Object(p.jsx)("td",{children:Object(p.jsxs)(a.s,{children:[Object(p.jsx)(a.v,{children:Object(p.jsx)(c.a,{name:"cilSettings",size:"2xl"})}),Object(p.jsxs)(a.u,{children:[Object(p.jsxs)(a.t,{onClick:function(){return t.push("/productlist/".concat(e._id))},children:[Object(p.jsx)(u.a,{})," Edit"]}),Object(p.jsxs)(a.t,{onClick:function(){return t=e._id,void b.a.delete(te+"/api/products/deleteProduct/"+t,{headers:{Authorization:"Bearer ".concat(j)}}).then((function(e){se({type:"success",massage:e.data.message}),de(5e3),ce(!ne)})).catch((function(e){se({type:"error",massage:e.response.data.message}),de(5e3)}));var t},children:[Object(p.jsx)(s.a,{})," Delete"]})]})]})})}}})})]})})}),Object(p.jsxs)(a.L,{className:"sm-30",show:S,onClose:be,children:[Object(p.jsxs)(a.O,{closeButton:!0,children:["Add ",null===M||void 0===M||null===(e=M.product)||void 0===e?void 0:e.name," To ",null===M||void 0===M?void 0:M.offerTitle]}),Object(p.jsxs)(a.M,{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"exampleFormControlFile2",children:"Offer Title"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",name:"offerTitle",id:"exampleFormControlFile2",value:null===M||void 0===M?void 0:M.offerTitle,disabled:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"exampleFormControlFile2",children:"Product Discount in %"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"number",name:"discount",id:"exampleFormControlFile2",min:"1",max:"100",onChange:function(e){return E(e.target.value)},value:D})]})]}),Object(p.jsxs)(a.N,{children:[Object(p.jsx)(a.f,{onClick:be,color:"primary",children:"Cancel"}),Object(p.jsx)(a.f,{onClick:function(){var e;e=M.flashSalesTitle?"/api/admin/product/push/flashsales":"/api/admin/product/push/offers",b.a.post(te+e,{offerId:M._id,product:M.product._id,discount:D},{headers:{Authorization:"Bearer ".concat(j)}}).then((function(e){se({type:"success",massage:e.data.message}),de(8e3),be(),E(1),U(null)})).catch((function(e){be(),se({type:"error",massage:e.response.data.message}),de(5e3)}))},color:"primary",children:"Confirm"})]})]}),"error"===(null===oe||void 0===oe?void 0:oe.type)&&Object(p.jsx)("div",{className:"position-fixed fixed-top d-flex justify-content-center",children:Object(p.jsx)(a.a,{color:"danger",children:oe.massage})}),"success"===(null===oe||void 0===oe?void 0:oe.type)&&Object(p.jsx)("div",{className:"position-fixed fixed-top d-flex justify-content-center",children:Object(p.jsx)(a.a,{color:"success",children:oe.massage})})]})}}}]);
//# sourceMappingURL=33.82ad9c72.chunk.js.map